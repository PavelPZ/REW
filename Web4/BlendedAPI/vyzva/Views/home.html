<div class="panel panel-default lm-top-margin" ng-if="::ts.myTask.isLector">
  <div class="panel-heading">
    <h4>Moje studijní skupiny</h4>
  </div>
  <div class="list-group">
    <a href="#" class="list-group-item" ng-repeat="group in ts.myTask.lectorGroups" ng-click="ts.gotoLector(group.groupId)">
      <div class="row">
        <div class="col-sm-10">
          <h4 class="pull-left"><span class="flag-small" style="vertical-align:top" ng-class="group.line | lineIdsFlag"></span> {{::group.title}}</h4>
        </div>
        <div class="col-sm-2 text-right">
          <div class="btn btn-success ">Studenti <i class="fa fa-play"></i></div>
        </div>
      </div>
    </a>
  </div>
</div>

<div ng-click="::ts.debugClearProduct()">del</div>

<div class="panel panel-primary lm-top-margin home-course" ng-if="::ts.myTask.isStudent" ng-controller="collapsable as homecollapsable">
  <div class="panel-heading" ng-click="homecollapsable.isCollapsed = !homecollapsable.isCollapsed">
    <h3>
      <span ng-if="ts.lessons[0].status<=1">Rozřazovací test</span>
      <b ng-if="ts.lessons[0].status>1">Kurz úrovně {{::ts.pretestLevel | levelText}}</b>
    </h3>
    <div ng-if="ts.lessons[0].status>1" class="more fa fa-bars fa-lg"></div>
  </div>
  <div collapse="homecollapsable.isCollapsed" class="position-relative home-more-panel">
    <div class="clearfix"></div>
    <div class="close-panel fa fa-times" ng-click="homecollapsable.isCollapsed = !homecollapsable.isCollapsed"></div>
    <h4>{{::ts.title}}, podrobné informace:</h4>
    <div vyzva$common$summary user="ts.user"></div>
  </div>
  <ul class="study-plan list-group">
    <li class="list-group-item" ng-repeat="lesson in ::ts.lessons"
        ng-style="::{cursor: lesson.rightButtonType && !lesson.cannotRun ? 'pointer' : 'default'}"
        ng-click="::lesson.rightButtonType && ts.navigateLesson(lesson)"
        ng-class="::lesson | vyzva$home$nodeclass">
      <div ng-if="::!lesson.lessonType" ng-include="'vyzva$home$pretest.html'"></div>
      <div ng-if="::lesson.lessonType" ng-include="'vyzva$home$lesson.html'"></div>
    </li>
  </ul>
</div>

<script type="text/ng-template" id="vyzva$home$lesson.html">
  <div ng-include="'vyzva$home$leftmark.html'"></div>
  <button class="btn btn-info right-mark" ng-if="::lesson.rightButtonType==2">Výsledky <i class="fa fa-eye"></i></button>
  <button class="btn right-mark"
          ng-class="::{'btn-success': !lesson.active, 'btn-succes-info': lesson.active}"
          ng-if="::lesson.rightButtonType==1"
          ng-disabled="::lesson.cannotRun">
    Spustit <i class="fa fa-play"></i>
  </button>
  <h4>
    <span ng-if="::lesson.lessonType==1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
    <span ng-if="::lesson.lessonType==2"><i class="fa fa-line-chart"></i></span>
    {{::lesson.node.title}}
  </h4>
</script>

<script type="text/ng-template" id="vyzva$home$pretest.html">
  <div ng-include="'vyzva$home$leftmark.html'"></div>
  <div data-ng-if="::lesson.status<2">
    <p>
      <button class="btn btn-success btn-lg" ng-disabled="::lesson.cannotRun" data-ng-click="::ts.navigateLesson(lesson)">
        Rozřazovací test
        <!--{{::lesson.status==0 ? 'Začněte spuštěním testu' : 'Dokončete test'}}-->
      </button>
    </p>
    Rozřazovací test určí vaši jazykovou úroveň (A1, A2, B1 nabo B2), na základě které se zvolí odpovídající pokračování vašeho kurzu.
  </div>
  <div data-ng-if="::lesson.status>=2">
    <h4><i class="fa fa-line-chart"></i> Rozřazovací test dokončen: vaše jazyková úroveň je {{::ts.pretestLevel | levelText}}</h4>
    <div class="btn-group right-mark">
      <button type="button" ng-repeat="level in ::ts.pretestLevels" class="btn btn-info btn-sm" ng-click="::ts.navigatePretestLevel(level)">{{level | levelText}} <i class="fa fa-eye"></i></button>
    </div>
  </div>
</script>

<script type="text/ng-template" id="vyzva$home$leftmark.html">
  <div ng-if="::lesson.leftMarkType==1" class="left-mark icon"><i class="fa fa-hand-o-right"></i></div>
  <div ng-if="::lesson.leftMarkType==2" class="left-mark level">{{::ts.pretestLevel | levelText}}</div>
  <div ng-if="::lesson.leftMarkType==4" class="left-mark icon"><i class="fa fa-question"></i></div>
  <div ng-if="::lesson.leftMarkType==3" class="left-mark percent-mark">
    <div class="progress-bar">
      <span ng-style="::lesson.user.score | vyzva$exmodule$percentheight : 32" class="progress-red">{{::lesson.user.score}}%</span>
      <span>{{::lesson.user.score}}%</span>
    </div>
  </div>
</script>
